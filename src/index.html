<!DOCTYPE html>
<html lang="en" class="dark">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Version Guard</title>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@phosphor-icons/web@2.0.3/src/regular/style.min.css">
</head>
<body class="tahoe-window">

  <!-- ====================================================================
       TITLEBAR - macOS Traffic Lights
       ==================================================================== -->
  <header class="tahoe-titlebar">
    <div class="traffic-lights">
      <button class="traffic-light close" id="btn-close"></button>
      <button class="traffic-light minimize" id="btn-minimize"></button>
      <button class="traffic-light maximize" id="btn-maximize"></button>
    </div>
  </header>

  <!-- ====================================================================
       MAIN CONTENT AREA
       ==================================================================== -->
  <main id="main-stage" class="tahoe-content">

    <!-- ================================================================
         VIEW: WELCOME
         ================================================================ -->
    <section id="view-welcome" class="view active">
      <div class="hero">
        <i class="ph ph-shield-check hero-icon"></i>
        <h1>Version Guard</h1>
        <p>Lock your CapCut version and prevent unsolicited updates.</p>
      </div>

      <!-- Protection Status Badge -->
      <div id="protection-status" class="status-badge" style="display: none;">
        <i class="ph ph-shield-checkered"></i>
        <span>Protected</span>
      </div>

      <div class="spacer"></div>

      <div class="button-stack mx-auto">
        <button class="btn-primary" id="btn-start">Get Started</button>
        <button class="btn-secondary" id="btn-remove-protection" style="display: none;">
          <i class="ph ph-shield-slash"></i>
          Remove Protection
        </button>
        <button class="btn-secondary" id="btn-switch">
          <i class="ph ph-swap"></i>
          Quick Switch
        </button>
        <button class="btn-plain" id="btn-legacy">
          <i class="ph ph-download-simple"></i>
          Download Legacy Version
        </button>
      </div>

      <footer class="app-footer">
        <a href="https://github.com/Zendevve/capcut-version-guard" target="_blank">
          <i class="ph ph-github-logo"></i> GitHub
        </a>
        <span id="app-version">v2.2.0</span>
      </footer>
    </section>

    <!-- ================================================================
         VIEW: PRECHECK - System Environment Check
         ================================================================ -->
    <section id="view-precheck" class="view">
      <nav class="tahoe-nav">
        <button class="tahoe-nav-back" id="precheck-back">
          <i class="ph ph-caret-left"></i>
        </button>
        <span class="tahoe-nav-title">System Check</span>
      </nav>

      <div class="hero">
        <i class="ph ph-folder-open hero-icon"></i>
        <h2>Checking Environment</h2>
        <p>Verifying your system configuration.</p>
      </div>

      <div class="list-section">
        <div class="glass-panel">
          <div class="list-row">
            <i class="status-icon success ph ph-check-circle" id="check-install"></i>
            <div class="row-content">
              <span class="row-title" id="check-install-text">CapCut installation found</span>
            </div>
          </div>
          <div class="list-row">
            <i class="status-icon success ph ph-check-circle" id="check-process"></i>
            <div class="row-content">
              <span class="row-title" id="check-process-text">CapCut is not running</span>
            </div>
          </div>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="button-stack mx-auto">
        <button class="btn-primary" id="btn-continue-precheck">Continue</button>
      </div>
    </section>

    <!-- ================================================================
         VIEW: VERSION SELECT
         ================================================================ -->
    <section id="view-versions" class="view">
      <nav class="tahoe-nav">
        <button class="tahoe-nav-back" id="versions-back">
          <i class="ph ph-caret-left"></i>
        </button>
        <span class="tahoe-nav-title">Select Version</span>
      </nav>

      <p class="text-center text-label-secondary text-13 mb-4">Choose the version to protect.</p>

      <div class="list-section">
        <div class="glass-panel" id="version-list">
          <!-- Versions populated by JS -->
        </div>
      </div>

      <div class="spacer"></div>

      <div class="button-stack mx-auto">
        <button class="btn-primary" id="btn-continue-version" disabled>Continue</button>
      </div>
    </section>

    <!-- ================================================================
         VIEW: OPTIONS - Cache Clean & Protection
         ================================================================ -->
    <section id="view-options" class="view">
      <nav class="tahoe-nav">
        <button class="tahoe-nav-back" id="options-back">
          <i class="ph ph-caret-left"></i>
        </button>
        <span class="tahoe-nav-title">Options</span>
      </nav>

      <div class="list-section">
        <span class="list-header">Cleanup</span>
        <div class="glass-panel">
          <div class="list-row">
            <div class="row-icon bg-accent-orange">
              <i class="ph ph-trash"></i>
            </div>
            <div class="row-content">
              <span class="row-title">Clean Temporary Files</span>
              <span class="row-subtitle" id="cache-size">0.0 MB can be freed</span>
            </div>
            <div class="toggle-switch on" id="toggle-cache"></div>
          </div>
        </div>
      </div>

      <div class="list-section">
        <span class="list-header">Protection</span>
        <div class="glass-panel">
          <div class="list-row">
            <div class="row-icon bg-accent-blue">
              <i class="ph ph-lock"></i>
            </div>
            <div class="row-content">
              <span class="row-title">Lock Configuration</span>
              <span class="row-subtitle">Prevents automatic updates</span>
            </div>
            <div class="toggle-switch on" id="toggle-lock"></div>
          </div>
          <div class="list-row">
            <div class="row-icon bg-accent-green">
              <i class="ph ph-shield"></i>
            </div>
            <div class="row-content">
              <span class="row-title">Create Blockers</span>
              <span class="row-subtitle">Blocks updater executable</span>
            </div>
            <div class="toggle-switch on" id="toggle-blocker"></div>
          </div>
        </div>
      </div>

      <div class="spacer"></div>

      <div class="button-stack mx-auto">
        <button class="btn-primary" id="btn-apply">
          <i class="ph ph-lock"></i>
          Apply Protection
        </button>
      </div>
    </section>

    <!-- ================================================================
         VIEW: PROCESSING
         ================================================================ -->
    <section id="view-processing" class="view">
      <div class="hero">
        <i class="ph ph-gear spin hero-icon"></i>
        <h2>Applying Protection</h2>
        <p>Please wait...</p>
      </div>

      <div class="progress-bar">
        <div class="progress-fill" id="progress-bar"></div>
      </div>

      <p class="text-center text-label-secondary text-13 mb-4" id="status-text">Initializing...</p>

      <div class="activity-log" id="activity-log">
        <!-- Log entries populated by JS -->
      </div>
    </section>

    <!-- ================================================================
         VIEW: COMPLETE
         ================================================================ -->
    <section id="view-complete" class="view">
      <div class="center-content">
        <i class="ph ph-check-circle hero-icon" style="color: #30D158;"></i>
        <h2>Protection Applied</h2>
        <p class="text-label-secondary text-13 mt-2 max-w-[280px]">
          Your CapCut version is now locked and protected from automatic updates.
        </p>
      </div>

      <div class="button-stack mx-auto">
        <button class="btn-primary" id="btn-done">Done</button>
      </div>
    </section>

    <!-- ================================================================
         VIEW: ERROR
         ================================================================ -->
    <section id="view-error" class="view">
      <div class="center-content">
        <i class="ph ph-warning-circle hero-icon" style="color: #FF453A;"></i>
        <h2>Something went wrong</h2>
        <p class="text-label-secondary text-13 mt-2 max-w-[280px]" id="error-message">
          An unexpected error occurred.
        </p>
      </div>

      <div class="button-stack mx-auto">
        <button class="btn-secondary" id="btn-retry">Try Again</button>
        <button class="btn-plain" id="btn-back-error">Go Back</button>
      </div>
    </section>

    <!-- ================================================================
         VIEW: LEGACY DOWNLOADS
         ================================================================ -->
    <section id="view-legacy" class="view">
      <nav class="tahoe-nav">
        <button class="tahoe-nav-back" id="legacy-back">
          <i class="ph ph-caret-left"></i>
        </button>
        <span class="tahoe-nav-title">Legacy Versions</span>
      </nav>

      <p class="text-center text-label-secondary text-13 mb-4">Download previous CapCut versions.</p>

      <div class="list-section">
        <div class="glass-panel" id="legacy-list">
          <!-- Legacy versions populated by JS -->
        </div>
      </div>
    </section>

    <!-- ================================================================
         VIEW: QUICK SWITCH
         ================================================================ -->
    <section id="view-switch" class="view">
      <nav class="tahoe-nav">
        <button class="tahoe-nav-back" id="switch-back">
          <i class="ph ph-caret-left"></i>
        </button>
        <span class="tahoe-nav-title">Quick Switch</span>
      </nav>

      <p class="text-center text-label-secondary text-13 mb-4">Select a version to activate without re-protecting.</p>

      <div class="list-section">
        <div class="glass-panel" id="switch-list">
          <!-- Versions populated by JS -->
        </div>
      </div>

      <div class="spacer"></div>

      <div class="button-stack mx-auto">
        <button class="btn-primary" id="btn-switch-apply" disabled>
          <i class="ph ph-swap"></i>
          Switch Version
        </button>
      </div>
    </section>

  </main>

  <script src="main.js" type="module"></script>
</body>
</html>
